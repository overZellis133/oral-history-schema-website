{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Oral History Metadata Schema",
  "description": "A comprehensive schema for representing oral histories with transcripts, metadata, clips, themes, and IIIF compatibility",
  "version": "1.0.0",
  "type": "object",
  "required": ["id", "type", "title", "created", "participants", "transcript"],
  "properties": {
    "@context": {
      "type": ["string", "array", "object"],
      "description": "JSON-LD context for IIIF compatibility",
      "default": [
        "http://www.w3.org/ns/anno.jsonld",
        "http://iiif.io/api/presentation/3/context.json"
      ]
    },
    "id": {
      "type": "string",
      "format": "uri",
      "description": "Unique identifier (URI) for this oral history"
    },
    "type": {
      "type": "string",
      "enum": ["OralHistory"],
      "description": "Type identifier for the resource"
    },
    "label": {
      "type": "object",
      "description": "IIIF-compatible multilingual label",
      "patternProperties": {
        "^[a-z]{2}(-[A-Z]{2})?$": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    },
    "title": {
      "type": "string",
      "description": "Primary title of the oral history"
    },
    "summary": {
      "type": "object",
      "description": "IIIF-compatible multilingual summary/description",
      "patternProperties": {
        "^[a-z]{2}(-[A-Z]{2})?$": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    },
    "description": {
      "type": "string",
      "description": "Plain text description of the oral history"
    },
    "metadata": {
      "type": "array",
      "description": "IIIF-compatible metadata pairs",
      "items": {
        "type": "object",
        "properties": {
          "label": {
            "type": "object",
            "patternProperties": {
              "^[a-z]{2}(-[A-Z]{2})?$": {
                "type": "array",
                "items": {"type": "string"}
              }
            }
          },
          "value": {
            "type": "object",
            "patternProperties": {
              "^[a-z]{2}(-[A-Z]{2})?$": {
                "type": "array",
                "items": {"type": "string"}
              }
            }
          }
        }
      }
    },
    "created": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 date-time when the interview was recorded"
    },
    "modified": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 date-time when metadata was last modified"
    },
    "duration": {
      "type": "number",
      "description": "Total duration in seconds"
    },
    "language": {
      "type": "array",
      "items": {"type": "string"},
      "description": "ISO 639 language codes for the interview"
    },
    "participants": {
      "type": "array",
      "description": "People involved in the interview",
      "items": {
        "type": "object",
        "required": ["id", "name", "role"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the participant"
          },
          "name": {
            "type": "string",
            "description": "Full name of the participant"
          },
          "role": {
            "type": "string",
            "enum": ["interviewer", "interviewee", "moderator", "observer", "translator"],
            "description": "Role in the interview"
          },
          "bio": {
            "type": "string",
            "description": "Biographical information"
          },
          "affiliations": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Organization or institution"
          },
          "identifiers": {
            "type": "object",
            "description": "External identifiers (ORCID, VIAF, etc.)",
            "properties": {
              "orcid": {"type": "string"},
              "viaf": {"type": "string"},
              "wikidata": {"type": "string"}
            }
          }
        }
      }
    },
    "location": {
      "type": "object",
      "description": "Geographic information about the interview",
      "properties": {
        "recording_location": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "address": {"type": "string"},
            "city": {"type": "string"},
            "region": {"type": "string"},
            "country": {"type": "string"},
            "coordinates": {
              "type": "object",
              "properties": {
                "latitude": {"type": "number"},
                "longitude": {"type": "number"}
              }
            }
          }
        },
        "participant_locations": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "participant_id": {"type": "string"},
              "location": {
                "type": "object",
                "properties": {
                  "name": {"type": "string"},
                  "city": {"type": "string"},
                  "region": {"type": "string"},
                  "country": {"type": "string"}
                }
              }
            }
          }
        }
      }
    },
    "rights": {
      "type": "string",
      "format": "uri",
      "description": "URI of the license or rights statement (e.g., Creative Commons)"
    },
    "requiredStatement": {
      "type": "object",
      "description": "IIIF-compatible attribution statement",
      "properties": {
        "label": {
          "type": "object",
          "patternProperties": {
            "^[a-z]{2}(-[A-Z]{2})?$": {
              "type": "array",
              "items": {"type": "string"}
            }
          }
        },
        "value": {
          "type": "object",
          "patternProperties": {
            "^[a-z]{2}(-[A-Z]{2})?$": {
              "type": "array",
              "items": {"type": "string"}
            }
          }
        }
      }
    },
    "provider": {
      "type": "array",
      "description": "IIIF-compatible provider information",
      "items": {
        "type": "object",
        "properties": {
          "id": {"type": "string", "format": "uri"},
          "type": {"type": "string", "enum": ["Agent"]},
          "label": {
            "type": "object",
            "patternProperties": {
              "^[a-z]{2}(-[A-Z]{2})?$": {
                "type": "array",
                "items": {"type": "string"}
              }
            }
          },
          "homepage": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {"type": "string", "format": "uri"},
                "type": {"type": "string", "enum": ["Text"]},
                "label": {
                  "type": "object",
                  "patternProperties": {
                    "^[a-z]{2}(-[A-Z]{2})?$": {
                      "type": "array",
                      "items": {"type": "string"}
                    }
                  }
                },
                "format": {"type": "string"}
              }
            }
          },
          "logo": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {"type": "string", "format": "uri"},
                "type": {"type": "string", "enum": ["Image"]},
                "format": {"type": "string"}
              }
            }
          }
        }
      }
    },
    "media": {
      "type": "object",
      "description": "Media files associated with the interview",
      "properties": {
        "video": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "url": {"type": "string", "format": "uri"},
              "format": {"type": "string"},
              "duration": {"type": "number"},
              "width": {"type": "integer"},
              "height": {"type": "integer"},
              "quality": {"type": "string"}
            }
          }
        },
        "audio": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "url": {"type": "string", "format": "uri"},
              "format": {"type": "string"},
              "duration": {"type": "number"}
            }
          }
        }
      }
    },
    "transcript": {
      "type": "object",
      "required": ["segments"],
      "description": "Full transcript with speaker attribution and timing",
      "properties": {
        "language": {"type": "string"},
        "segments": {
          "type": "array",
          "description": "Transcript segments organized by speaker turns",
          "items": {
            "type": "object",
            "required": ["id", "speaker_id", "start_time", "end_time", "text"],
            "properties": {
              "id": {"type": "string"},
              "speaker_id": {"type": "string"},
              "speaker_name": {"type": "string"},
              "start_time": {"type": "number", "description": "Start time in seconds"},
              "end_time": {"type": "number", "description": "End time in seconds"},
              "text": {"type": "string"},
              "words": {
                "type": "array",
                "description": "Word-level timing information",
                "items": {
                  "type": "object",
                  "properties": {
                    "word": {"type": "string"},
                    "start": {"type": "number"},
                    "end": {"type": "number"},
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1}
                  }
                }
              }
            }
          }
        }
      }
    },
    "indexes": {
      "type": "array",
      "description": "Topic-based indexes or table of contents",
      "items": {
        "type": "object",
        "required": ["id", "title", "start_time"],
        "properties": {
          "id": {"type": "string"},
          "title": {"type": "string"},
          "description": {"type": "string"},
          "start_time": {"type": "number"},
          "end_time": {"type": "number"},
          "keywords": {
            "type": "array",
            "items": {"type": "string"}
          },
          "parent_id": {
            "type": "string",
            "description": "For hierarchical indexes"
          }
        }
      }
    },
    "clips": {
      "type": "array",
      "description": "Curated clips or highlights",
      "items": {
        "type": "object",
        "required": ["id", "title", "start_time", "end_time"],
        "properties": {
          "id": {"type": "string"},
          "title": {"type": "string"},
          "description": {"type": "string"},
          "start_time": {"type": "number"},
          "end_time": {"type": "number"},
          "thumbnail_url": {"type": "string", "format": "uri"},
          "tags": {
            "type": "array",
            "items": {"type": "string"}
          },
          "created_by": {"type": "string"},
          "created_at": {"type": "string", "format": "date-time"},
          "public": {"type": "boolean"}
        }
      }
    },
    "themes": {
      "type": "array",
      "description": "Thematic analysis of the interview content",
      "items": {
        "type": "object",
        "required": ["id", "name"],
        "properties": {
          "id": {"type": "string"},
          "name": {"type": "string"},
          "description": {"type": "string"},
          "occurrences": {
            "type": "array",
            "description": "Time ranges where this theme appears",
            "items": {
              "type": "object",
              "properties": {
                "start_time": {"type": "number"},
                "end_time": {"type": "number"},
                "segment_id": {"type": "string"},
                "strength": {
                  "type": "string",
                  "enum": ["primary", "secondary", "mentioned"]
                }
              }
            }
          },
          "related_themes": {
            "type": "array",
            "items": {"type": "string"},
            "description": "IDs of related themes"
          }
        }
      }
    },
    "named_entities": {
      "type": "array",
      "description": "Named entity recognition results",
      "items": {
        "type": "object",
        "required": ["id", "text", "type"],
        "properties": {
          "id": {"type": "string"},
          "text": {"type": "string"},
          "type": {
            "type": "string",
            "enum": ["PERSON", "ORGANIZATION", "LOCATION", "DATE", "EVENT", "PRODUCT", "TECHNOLOGY", "OTHER"]
          },
          "normalized_text": {"type": "string"},
          "identifiers": {
            "type": "object",
            "description": "Links to external knowledge bases",
            "properties": {
              "wikidata": {"type": "string"},
              "wikipedia": {"type": "string", "format": "uri"},
              "dbpedia": {"type": "string", "format": "uri"}
            }
          },
          "occurrences": {
            "type": "array",
            "description": "Where this entity appears in the transcript",
            "items": {
              "type": "object",
              "properties": {
                "segment_id": {"type": "string"},
                "start_time": {"type": "number"},
                "end_time": {"type": "number"},
                "context": {"type": "string"}
              }
            }
          }
        }
      }
    },
    "annotations": {
      "type": "array",
      "description": "User annotations and comments (IIIF-compatible)",
      "items": {
        "type": "object",
        "properties": {
          "@context": {"type": "string"},
          "id": {"type": "string", "format": "uri"},
          "type": {"type": "string", "enum": ["Annotation"]},
          "motivation": {
            "type": "string",
            "enum": ["commenting", "highlighting", "tagging", "bookmarking", "questioning", "correcting"]
          },
          "created": {"type": "string", "format": "date-time"},
          "creator": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "type": {"type": "string", "enum": ["Person", "Software"]},
              "name": {"type": "string"}
            }
          },
          "body": {
            "type": "object",
            "properties": {
              "type": {"type": "string", "enum": ["TextualBody"]},
              "value": {"type": "string"},
              "format": {"type": "string"},
              "language": {"type": "string"}
            }
          },
          "target": {
            "type": "object",
            "description": "What this annotation refers to",
            "properties": {
              "source": {"type": "string", "format": "uri"},
              "selector": {
                "type": "object",
                "properties": {
                  "type": {"type": "string"},
                  "start": {"type": "number"},
                  "end": {"type": "number"}
                }
              }
            }
          }
        }
      }
    },
    "relations": {
      "type": "array",
      "description": "Relationships to other oral histories or resources",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["part_of_series", "related_to", "response_to", "follow_up", "references"]
          },
          "target_id": {"type": "string", "format": "uri"},
          "description": {"type": "string"}
        }
      }
    },
    "processing": {
      "type": "object",
      "description": "Information about automated processing",
      "properties": {
        "transcription": {
          "type": "object",
          "properties": {
            "method": {"type": "string", "enum": ["automatic", "manual", "hybrid"]},
            "engine": {"type": "string"},
            "version": {"type": "string"},
            "processed_at": {"type": "string", "format": "date-time"},
            "reviewed": {"type": "boolean"},
            "reviewed_by": {"type": "string"},
            "reviewed_at": {"type": "string", "format": "date-time"}
          }
        },
        "entity_recognition": {
          "type": "object",
          "properties": {
            "engine": {"type": "string"},
            "version": {"type": "string"},
            "processed_at": {"type": "string", "format": "date-time"}
          }
        },
        "theme_extraction": {
          "type": "object",
          "properties": {
            "method": {"type": "string"},
            "engine": {"type": "string"},
            "processed_at": {"type": "string", "format": "date-time"}
          }
        }
      }
    },
    "preservation": {
      "type": "object",
      "description": "Digital preservation metadata",
      "properties": {
        "checksum": {
          "type": "object",
          "properties": {
            "algorithm": {"type": "string"},
            "value": {"type": "string"}
          }
        },
        "archived": {
          "type": "boolean"
        },
        "archive_location": {"type": "string"},
        "backup_locations": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    }
  }
}
